<mujoco model="mycobot scene">
<compiler meshdir="../meshes_mujoco/" coordinate="local"/>
  <include file="mycobot_280_m5_mujoco.xml"/>
  <!-- <option integrator="implicitfast" timestep="0.002" gravity="0 0 -9.81"/> -->
  <option integrator="RK4" timestep="0.002" gravity="0 0 -9.81"/>
  <!-- <option o_solref="0.00001 1" o_solimp="0.01 1" impratio="1000" noslip_iterations="1">
    <flag override="enable" />
  </option> -->

  <statistic center="0.3 0 0.35" extent="0.8" meansize="0.05"/>

	<visual>
			<headlight diffuse="0.5 0.5 0.5"
									ambient="0.15 0.15 0.15"
									specular="0.2 0.2 0.2"/>

			<global
				azimuth="120"
				elevation="-25"
				offwidth="2048"
				offheight="2048"/>
	</visual>


  <asset>
		<texture name="grid" type="2d" builtin="checker" rgb1=".18 .24 .30" rgb2=".12 .16 .20" width="1024" height="1024" mark="edge" markrgb=".8 .8 .8"/>
    <material name="grid" texture="grid" texrepeat="2 2" texuniform="true"/>
    
		<texture name="table_tex" type="2d" builtin="flat" rgb1="0.43 0.33 0.25" width="256" height="256"/>
    <material name="table_mat" texture="table_tex" rgba="1 1 1 1"/>
    <material name="accent" rgba="0.17 0.52 0.73 1" shininess="0.4" specular="0.2"/>

		<texture name="custom_mesh_tex" type="2d" file="../meshes_mujoco/material_0.png"/>

		<material name="custom_mesh_mat" texture="custom_mesh_tex" texrepeat="2 2" reflectance="0" shininess="0" specular="0" emission="0"/>

		<mesh name="custom_mesh_visual" file="object_visual.obj"/>
    <mesh name="custom_mesh_collision" file="object_collision.obj"/>

  </asset>


  <worldbody>
		<light name="sun_key"
					pos="0 0 2.0"
					dir="-0.3 0.2 -1"
					directional="true"
					diffuse="1.0 1.0 1.0"
					specular="0.3 0.3 0.3"
					castshadow="true"/>

		<light name="fill"
					pos="1.5 -1.0 1.2"
					dir="-1 1 -0.5"
					directional="true"
					diffuse="0.35 0.35 0.35"
					specular="0 0 0"
					castshadow="false"/>


		<geom name="floor" size="2 2 0.02" type="plane" material="grid" contype="1" conaffinity="1"/>

    <!-- <body name="table" pos="0 0 -0.115">
      <geom type="box" size="0.45 0.7 0.04" material="table_mat"/>
      <geom name="table_top" type="box" pos="0 0 0.08" size="0.45 0.7 0.02" material="table_mat" contype="1" conaffinity="1"/>
    </body> -->

		<!-- y-axis is from the viewer from right to left -->
    <body name="target" pos="0.2 0.2 0.1" quat="0 1 0 0" mocap="true">
      <geom type="box" size=".03 .03 .03" contype="0" conaffinity="0" material="accent" rgba="0.1 0.6 0.85 0.7"/>
      <site type="sphere" size="0.012" rgba="0.1 0.4 1 1" group="1"/>
    </body>



		 <!-- ================= CUSTOM OBJECT ================= -->
		<body name="custom_object" pos="0.02 0.04 0.7" euler="0.2 0.8 0">
      <joint type="free"/>

      <!-- VISUAL -->
      <geom
          type="mesh"
          mesh="custom_mesh_visual"
          material="custom_mesh_mat"
          contype="0"
          conaffinity="0"/>

      <!-- COLLISION -->
      <geom
          type="mesh"
          mesh="custom_mesh_collision"
          mass="1.0"
          contype="1"
          conaffinity="1"
          friction="0.2 0.5 0.2"
          solref="0.002 1"
          solimp="0.95 0.99 0.0001"/>

		<!-- friction = [sliding, torsional (spinning in place), rolling]
		solref = [time_constant (How fast contact errors are corrected), damping_ratio (Critical damping)]
		solimp = [d_min: Impedance at deep penetration, 
							d_max: Impedance at initial contact, 
							width: Transition distance between soft â†’ stiff] -->




				<!-- <geom
					type="box"
					size="0.05 0.05 0.05"
					mass="1.0"
					contype="1"
					conaffinity="1"
					friction="1.0 0.1 0.01"/> -->

    </body>



    <body name="work_cube" pos="0.32 -0.18 0.08">
      <geom type="box" size="0.03 0.03 0.05" rgba="0.9 0.5 0.3 1" contype="1" conaffinity="1" friction="0.8 0.1 0.01"/>
    </body>
  </worldbody>

</mujoco>
